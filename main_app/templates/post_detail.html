<!-- In your post_detail.html -->
{% extends 'base.html' %}

{% block content %}
<div class="post-detail">
    <h1>{{ post.title }}</h1>
    <p>{{ post.content }}</p>
    
    <!-- Upvote and Downvote Buttons -->
    <a href="{% url 'upvote_post' post.pk %}">Upvote</a>
    <span>{{ post.upvotes }}</span>
    <a href="{% url 'downvote_post' post.pk %}">Downvote</a>
    <span>{{ post.downvotes }}</span>

    <!-- Edit and Delete Links (only show if the user is the author) -->
    {% if user == post.author %}
        <a href="{% url 'edit_post' post.pk %}">Edit</a>
        <a href="{% url 'delete_post' post.pk %}">Delete</a>
    {% endif %}

    <!-- Comments Section -->
    <div class="comments">
        <h2>Comments</h2>
        {% for comment in comments %}
            <div class="comment">
                <p>{{ comment.text }}</p>
                <!-- Comment Voting -->
                <a href="{% url 'upvote_comment' post.pk comment.pk %}">Upvote</a>
                <span>{{ comment.upvotes }}</span>
                <a href="{% url 'downvote_comment' post.pk comment.pk %}">Downvote</a>
                <span>{{ comment.downvotes }}</span>
            </div>
        {% endfor %}
    </div>

    <!-- Comment Form -->
    <div class="comment-form">
        <form method="post">
            {% csrf_token %}
            {{ comment_form.as_p }}
            <button type="submit">Post Comment</button>
        </form>
    </div>
</div>
{% endblock %}
